# URLconf相关 #

----------


django处理请求的步骤:
1.寻找根URLconf
2.加载urlpatterns
3.从头到尾依次匹配url,匹配到第一个满足正则条件时退出(**顺序极其重要**)
4.1.调用对应的视图函数,传入HttpRequest实例和其他可选参数,最后返回处理结果.
4.2.路由转发/二级路由(推荐形式),重复以上步骤.
5.如果到最后都没有满足的正则就会报错.

对URLconf的理解:
路由,类似一个目录的功能,通过设置URLconf就能知道一个url请求调用那个函数来处理,可以设计多层路由来实现解耦.

url中的参数
接收四个参数,其中`regex`,`view`必须有.

`regex`:表示正则表达式

`view`:处理满足正则要求的url的视图函数(也可以是二级路由)

`kwargs`:传入自定义的额外的关键字参数`{xx:yy}`

`name`:对url命名,在反解析url时会被用到.


如果需要可以对regex捕获,以位置参数或者是关键字参数的形式传入对应的视图函数中.不需要包含`/`,需要的才捕获.
例如:当url是`/articles/2005/03/`
```
# 位置参数,将传 (request,'2005','03') 给view 
url(r'^articles/([0-9]{4})/([0-9]{2})/$', views.month_archive),

# 关键字参数,将传 (request, year='2003', month='03', day='03')
url(r'^articles/(?P<year>[0-9]{4})/(?P<month>[0-9]{2})/$', views.month_archive),
```

注意:
1.URLonf将不会匹配`post`/`get`等请求方式产生出来的额外参数和域名.view将对这些请求方式做出相应的处理.
2.捕获出来的内容一定是**字符串**

路由转发的规则:
形式:`url(r'^contact/', include('django_website.contact.urls'))`
一般正则都是以`/`结尾.
传递给二级路由(设置在app的url.py中)处理的url将自动去掉满足上级路由规则的部分,将剩余的部分传递给二级路由.
二级路由将接收所有上级路由的参数